<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>
<body>

<div class="container mt-5">
    <div class="row">
        <div class="col-12 col-md-6 offset-md-3 mt-5">
            <form id="update-setting" onsubmit="return false">
                <div class="form-group">
                    <label for="client_id">Client id</label>
                    <input name="client_id" type="text" class="form-control" id="client_id" aria-describedby="emailHelp" placeholder="CLIENT ID">
                </div>
                <br>
                <div class="form-group">
                    <label for="app_secret">App secret</label>
                    <input name="app_secret" type="text" class="form-control" id="app_secret" placeholder="APP SECRET">
                </div>
                <br>
                <div class="form-group">
                    <label for="status">Status</label>
                    <input name="status" type="checkbox" class="form-check-input" id="status">
                </div>
                <br>
                <div class="form-group">
                    <label for="sandbox-mode">Sandbox Mode</label>
                    <input name="sandbox_mode" type="checkbox" class="form-check-input" id="sandbox-mode">
                </div>
                <br>
                <button type="submit" class="btn btn-primary">Submit</button>
            </form>
        </div>
    </div>
</div>

<script>
    $(document).ready(function (){
        $.ajax({
            url: 'http://uvodo.test/admin/api/plugins/uvodohq/paypal/settings',
            type: 'GET',
            success: function (response) {
                console.log(response)
                $('input[name="client_id"]').val(response.paypal_client_id);
                $('input[name="app_secret"]').val(response.paypal_app_secret);

                if (response.status && response.status === '1') {
                    $('input[name="status"]').prop('checked', true)
                }

                if (response.paypal_sandbox_mode && response.paypal_sandbox_mode === '1') {
                    $('input[name="sandbox_mode"]').prop('checked', true)
                }
            }
        });
    });

    $(document).on('submit', '#update-setting', function (){

        let data = $('#update-setting').serialize();

        $.ajax({
            url: 'http://uvodo.test/admin/api/plugins/uvodohq/paypal/settings',
            type: 'PUT',
            data: data,
            success: function (result) {
                console.log(result)
            }
        });
    });
</script>

</body>
</html>
